webpackJsonp([2,0],[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r(33),r(27);var n=r(43),a=o(n),i=r(42),s=o(i),u=r(38),d=o(u),l=r(40),c=o(l),f=r(41),p=o(f),v=r(39),h=o(v),g=r(2);a["default"].use(s["default"]);var m=new s["default"];m.map({"":{component:c["default"]},"/time-log/:sheetId":{component:p["default"]},"/create-time-log":{component:h["default"]}}),m.start(d["default"],"#app"),(0,g.init)()},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return gapi.client.sheets.spreadsheets.values.get({spreadsheetId:e,range:"A2:C"})}function a(e,t,r,o){return gapi.client.sheets.spreadsheets.values.append({spreadsheetId:e,valueInputOption:"USER_ENTERED",range:"A2:C",values:[[t,r,o]]})}function i(e){return gapi.client.sheets.spreadsheets.create((0,u["default"])(e)).then(function(t){var r=t.result;return d.files.unshift({id:r.spreadsheetId,name:e}),r})}Object.defineProperty(t,"__esModule",{value:!0});var s=r(9),u=o(s),d={authStatus:"unknown",sheetsReady:!1,files:[],fetchLastRecords:n,logTime:a,createFile:i};t["default"]=d},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){gapi.auth.authorize({client_id:p,scope:v,immediate:e},i)}function a(){return gapi.auth?void(h||(h=!0,n(!0))):void(window.initGapi=a)}function i(e){var t=e&&!e.error;f["default"].authStatus=t?"ok":"error",t&&s()}function s(){gapi.client.load("https://sheets.googleapis.com/$discovery/rest?version=v4").then(u),gapi.client.load("drive","v3",d)}function u(){f["default"].sheetsReady=!0}function d(){gapi.client.drive.files.list({q:"mimeType='application/vnd.google-apps.spreadsheet' and trashed = false",pageSize:100}).execute(function(e){f["default"].files=e.files})}function l(e){return e.result&&e.result.error?e.result.error.message:"Unknown error :("}Object.defineProperty(t,"__esModule",{value:!0}),t.signin=n,t.init=a,t.getError=l;var c=r(1),f=o(c),p="616901175953-k3qnrg34f7khs5a688k8l51oqn4f15o1.apps.googleusercontent.com",v=["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/spreadsheets","https://www.googleapis.com/auth/spreadsheets.readonly","https://www.googleapis.com/auth/drive.readonly"],h=!1},,,,,,,function(e,t){"use strict";function r(e){return{properties:{title:""+e},sheets:{properties:{title:"Time Log",gridProperties:{frozenRowCount:1,frozenColumnCount:3}},data:[{startRow:0,startColumn:0,rowData:{values:[{userEnteredValue:{stringValue:"Start"},userEnteredFormat:{horizontalAlignment:"CENTER",textFormat:{bold:!0}}},{userEnteredValue:{stringValue:"End"},userEnteredFormat:{horizontalAlignment:"CENTER",textFormat:{bold:!0}}},{userEnteredValue:{stringValue:"What?"},userEnteredFormat:{horizontalAlignment:"CENTER",textFormat:{bold:!0}}}]}}]}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),a=o(n),i=r(2);t["default"]={data:function(){return a["default"]},methods:{onSigninClick:function(){(0,i.signin)()}},computed:{unknown:function(){return"unknown"===a["default"].authStatus},loaded:function(){var e="ok"===a["default"].authStatus&&a["default"].sheetsReady;return e},needsAuth:function(){return"error"===a["default"].authStatus}}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),a=o(n),i=r(2);t["default"]={data:function(){return{name:"",status:"",error:""}},methods:{create:function(){var e=this;this.status="saving",a["default"].createFile(this.name).then(function(t){e.status="";var r=t.spreadsheetId;e.$router.go("/time-log/"+r)},function(t){e.error=(0,i.getError)(t)})}}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),a=o(n);t["default"]={data:function(){return a["default"]}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){e.recordsState="loading",v["default"].fetchLastRecords(a(e)).then(function(t){e.recordsState="loaded";var r=t.result.values||[],o=r.reverse().slice(0,100);e.lastRecords=o;var n=d(o);n?e.start=n:(e.start=u(),e.end=u())},function(e){console.error("failed to load range",e)})}function a(e){return e.$route.params.sheetId}function i(e){return s(new Date(e))}function s(e){return e.toISOString().substr(0,"2016-09-27T02:10:00".length).replace(/T/," ").replace(/-/g,"/")}function u(){return l(new Date)}function d(e){if(0===e.length)return"";var t=e[0];if(t.length<2)return"";var r=t[1];if(!r)return"";var o=new Date(r);return(0,f["default"])(o.getDate())?"":l(o)}function l(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())}Object.defineProperty(t,"__esModule",{value:!0});var c=r(14),f=o(c),p=r(1),v=o(p),h=r(2);t["default"]={created:function(){n(this)},data:function(){return{recordsState:"loading",lastRecords:[],start:"",end:u(),what:"",saveState:""}},computed:{title:function(){for(var e=0;e<v["default"].files.length;++e){var t=v["default"].files[e];if(t.id===this.$route.params.sheetId)return t.name}return""},editLink:function(){var e=a(this);return"https://docs.google.com/spreadsheets/d/"+e+"/edit"}},methods:{refreshRecords:function(){n(this)},setNow:function(e){this[e]=u()},logIt:function(){var e=this;this.saveState="saving";var t=i(this.start),r=i(this.end),o=a(this);v["default"].logTime(o,t,r,this.what).then(function(){e.lastRecords.unshift([t,r,e.what]),e.start=e.end,e.end=u(),e.what="",e.saveState="done",e.error=""},function(t){e.saveState="error",e.error=(0,h.getError)(t)})}}}},,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,function(e,t){e.exports=' <div class=container> <div v-if=unknown> <h3>Checking authentication...<h3> </h3></h3></div> <div v-if=loaded> <router-view class=view keep-alive></router-view> </div> <div v-if=needsAuth> <h1>Welcome to Sheetime!</h1> <p> This is just a simple interface to Google Sheets, that allows you to log your time. Log it here, and analyze from Google Sheets later </p> <a class="waves-effect waves-light btn" @click=onSigninClick>Sign in to Google Sheets</a> </div> </div> '},function(e,t){e.exports=' <div> <h3>Create new time log</h3> <form @submit.prevent=create> <div class=input-field> <label for=name>File name:</label> <input id=name type=text v-model=name autofocus> </div> <input type=submit class="waves-effect waves-light btn col s12" value="Create new file" v-if=\'status === ""\'/> </form> <div v-if=\'status === "saving"\'> <h4>Saving {{name}}...</h4> <div class=progress> <div class=indeterminate></div> </div> </div> <div v-if=error class="card-panel red-text"> <h4>Error...</h4> <pre><code>{{error}}</code></pre> <div> Refresh the page maybe? </div> </div> </div> '},function(e,t){e.exports=' <div> <h3>Choose your time log <small>or <a v-link="{path: \'/create-time-log\'}">create a new log</a></small></h3> <div class=collection> <a class=collection-item v-for="file in files" v-link="{path: \'/time-log/\' + file.id}">{{file.name}}</a> </div> </div> '},function(e,t){e.exports=' <div> <h4>{{title}} <small><a :href=editLink target=_blank title="edit in Google Sheets"><i class=material-icons>mode_edit</i></a></small></h4> <form novalidate @submit.prevent=logIt> <div> <label>Start <a href=# @click.prevent=\'setNow("start")\'>set to now</a></label> <input id=start type=datetime-local v-model=start> </div> <div> <label>End <a href=# @click.prevent=\'setNow("end")\'>set to now</a></label> <input id=end type=datetime-local v-model=end> </div> <div class=input-field> <label for=start>What?</label> <input id=what type=text v-model=what> </div> <div class=row v-if=\'saveState !== "saving"\'> <input type=submit class="waves-effect waves-light btn col s12" value="Log time"/> </div> </form> <div v-if=\'saveState === "saving"\'> <h4>Saving...</h4> <div class=progress> <div class=indeterminate></div> </div> </div> <div v-if=\'saveState === "error"\' class="card-panel red-text"> <h4>Error...</h4> <pre><code>{{error}}</code></pre> <div> Refresh the page maybe? </div> </div> <table v-if=\'recordsState === "loaded"\'> <thead> <tr> <th data-field=start>Start</th> <th data-field=end>End</th> <th data-field=what> What? <a href=# @click.prevent=refreshRecords class=right title=refresh>&#x21bb;</a> </th> </tr> </thead> <tbody> <tr v-for="record in lastRecords"> <td>{{record[0]}}</td> <td>{{record[1]}}</td> <td>{{record[2]}}</td> </tr> </tbody> </table> <div v-if=\'recordsState === "loading"\'> <h4>Loading records...</h4> <div class=progress> <div class=indeterminate></div> </div> </div> </div> '},function(e,t,r){var o,n,a={};r(28),o=r(10),n=r(34),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]);var i="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(i.template=n),i.computed||(i.computed={}),Object.keys(a).forEach(function(e){var t=a[e];i.computed[e]=function(){return t}})},function(e,t,r){var o,n,a={};r(29),o=r(11),n=r(35),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]);var i="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(i.template=n),i.computed||(i.computed={}),Object.keys(a).forEach(function(e){var t=a[e];i.computed[e]=function(){return t}})},function(e,t,r){var o,n,a={};r(30),o=r(12),n=r(36),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]);var i="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(i.template=n),i.computed||(i.computed={}),Object.keys(a).forEach(function(e){var t=a[e];i.computed[e]=function(){return t}})},function(e,t,r){var o,n,a={};r(31),o=r(13),n=r(37),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]);var i="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;n&&(i.template=n),i.computed||(i.computed={}),Object.keys(a).forEach(function(e){var t=a[e];i.computed[e]=function(){return t}})}]);
//# sourceMappingURL=app.cbd9bc2de642e8da2a10.js.map